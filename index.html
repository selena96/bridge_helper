<!DOCTYPE html>
<html lang="sr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bridž - test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f0f0f0;
            color: #333;
        }
        .container {
            width: 90%;
            max-width: 600px;
            margin: 20px auto;
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        h1 {
            text-align: center;
            font-size: 24px;
            margin-bottom: 20px;
        }
        .category-button {
            display: block;
            padding: 15px;
            margin: 10px 0;
            text-align: center;
            font-size: 18px;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .category-button:hover {
            opacity: 0.9;
        }
        .easy { background-color: #4CAF50; color: white; }
        .medium { background-color: #FF9800; color: white; }
        .hard { background-color: #F44336; color: white; }
        .question-container {
            display: none;
        }
        .answer-button {
            display: block;
            padding: 12px;
            margin: 10px 0;
            text-align: center;
            font-size: 18px;
            border: 2px solid #ccc;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .answer-button:hover {
            opacity: 0.8;
        }
        .hint {
            text-decoration: underline;
            cursor: pointer;
            color: #007BFF;
        }
        .green { background-color: #4CAF50 !important; }
        .red { background-color: #F44336 !important; }
        .explanation {
            margin-top: 20px;
            font-size: 16px;
            color: #555;
            border-top: 1px solid #ccc;
            padding-top: 10px;
        }
        .next-button {
            display: block;
            background-color: #007BFF;
            color: white;
            padding: 10px 20px;
            text-align: center;
            font-size: 18px;
            border-radius: 8px;
            margin-top: 20px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .next-button:hover {
            opacity: 0.9;
        }
        .score {
            text-align: center;
            font-size: 20px;
            margin-top: 20px;
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>Bridž - test</h1>

        <div class="main-menu">
            <h3>Izaberi kategoriju</h3>
            <button class="category-button easy" onclick="startQuiz('easy')">Lako</button>
            <button class="category-button medium" onclick="startQuiz('medium')">Srednje</button>
            <button class="category-button hard" onclick="startQuiz('hard')">Teško</button>
        </div>

        <div class="question-container" id="question-container">
            <h3 id="question-text"></h3>
            <div id="hint" class="hint" onclick="showHint()">Pokaži hint</div>

            <button id="answer1" class="answer-button" onclick="checkAnswer(1)"></button>
            <button id="answer2" class="answer-button" onclick="checkAnswer(2)"></button>
            <button id="answer3" class="answer-button" onclick="checkAnswer(3)"></button>
            <button id="answer4" class="answer-button" onclick="checkAnswer(4)"></button>

            <div class="explanation" id="explanation"></div>

            <button id="next-button" class="next-button" onclick="nextQuestion()" style="display:none;">Next</button>
        </div>

        <div class="score" id="score" style="display:none;">
            <h3>Vaš rezultat: <span id="final-score"></span></h3>
            <button class="next-button" onclick="goToMainMenu()">Idi na početni meni</button>
        </div>
    </div>

    <script>
        let questions = [];
        let currentQuestionIndex = 0;
        let score = 0;
        let currentCategory = '';

        // Fetch questions from questions.json
        fetch('questions.json')
            .then(response => response.json())
            .then(data => {
                questions = data;
            });

        // Start quiz for a selected category
        function startQuiz(category) {
            currentCategory = category;
            currentQuestionIndex = 0;
            score = 0;
            document.querySelector('.main-menu').style.display = 'none';
            document.querySelector('#question-container').style.display = 'block';
            loadQuestion();
        }

        // Load question based on the current index
        function loadQuestion() {
            const categoryQuestions = questions[currentCategory];
            const question = categoryQuestions[currentQuestionIndex];

            document.querySelector('#question-text').textContent = question.question;
            document.querySelector('#answer1').textContent = question.answers[0];
            document.querySelector('#answer2').textContent = question.answers[1];
            document.querySelector('#answer3').textContent = question.answers[2];
            document.querySelector('#answer4').textContent = question.answers[3];

            document.querySelector('#explanation').textContent = '';
            document.querySelector('#next-button').style.display = 'none';
            document.querySelectorAll('.answer-button').forEach(button => button.classList.remove('green', 'red'));

            document.querySelector('#hint').style.display = 'block';
        }

        // Show hint
        function showHint() {
            const categoryQuestions = questions[currentCategory];
            const question = categoryQuestions[currentQuestionIndex];
            document.querySelector('#explanation').textContent = question.hint;
        }

        // Check if the selected answer is correct
        function checkAnswer(answerIndex) {
            const categoryQuestions = questions[currentCategory];
            const question = categoryQuestions[currentQuestionIndex];
            const correctAnswer = question.correctAnswer;

            if (answerIndex === correctAnswer) {
                document.querySelector(`#answer${answerIndex}`).classList.add('green');
                score++;
            } else {
                document.querySelector(`#answer${answerIndex}`).classList.add('red');
                document.querySelector(`#answer${correctAnswer}`).classList.add('green');
            }

            document.querySelector('#explanation').textContent = question.explanation;
            document.querySelector('#next-button').style.display = 'block';
            document.querySelectorAll('.answer-button').forEach(button => button.disabled = true);
        }

        // Move to the next question or show final score
        function nextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex < questions[currentCategory].length) {
                loadQuestion();
            } else {
                showFinalScore();
            }
        }

        // Show final score and the "Go to Main Menu" button
        function showFinalScore() {
            document.querySelector('#score').style.display = 'block';
            document.querySelector('#final-score').textContent = `${score} / ${questions[currentCategory].length}`;
            document.querySelector('#question-container').style.display = 'none';
        }

        // Go back to the main menu
        function goToMainMenu() {
            document.querySelector('.main-menu').style.display = 'block';
            document.querySelector('#score').style.display = 'none';
        }
    </script>
</body>
</html>
